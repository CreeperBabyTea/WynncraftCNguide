import{u as O,i as X,j as ee,k as U,l as le,m as te,t as se,q as ue,s as L,v as A,x as ve,y as V,z as t,A as B,B as G,R as W,C as ae,D as ie,E as re,F as ne,G as he,H as oe,I as me,J as de,O as ce,K as qe,L as ge,P as ye,M as pe,N as fe,Q as x}from"./app-KajR1xPI.js";const be=["/","/guide/88skip.html","/guide/","/guide/Slang.html","/guide/VIP.html","/guide/beforegame.html","/guide/class.html","/guide/community.html","/guide/developmentroute.html","/guide/dungeon.html","/guide/earnle.html","/guide/festival.html","/guide/grindspot.html","/guide/history.html","/guide/lootrun.html","/guide/mod.html","/guide/npcs.html","/guide/profession.html","/guide/qa.html","/guide/skilltreestd.html","/guide/support.html","/newbie/","/newbie/beforegame.html","/quests/","/guide/advancesystem/bossaltar.html","/guide/advancesystem/build.html","/guide/advancesystem/guild.html","/guide/advancesystem/guildwar.html","/guide/advancesystem/li.html","/guide/advancesystem/mythic.html","/guide/advancesystem/tome.html","/guide/bar/","/guide/bar/baz.html","/guide/basesystem/command.html","/guide/basesystem/identification.html","/guide/basesystem/identify.html","/guide/basesystem/itemlevel.html","/guide/basesystem/powder.html","/guide/basesystem/questbook.html","/guide/basesystem/secretdiscovery.html","/guide/basesystem/soulpoint.html","/guide/commonfunction/emeraldpouch.html","/guide/commonfunction/horse.html","/guide/commonfunction/objective.html","/guide/commonfunction/pets.html","/guide/commonfunction/trademarket.html","/guide/dungeons/ds.html","/guide/dungeons/ip.html","/guide/dungeons/sst.html","/guide/dungeons/ts.html","/guide/dungeons/uc.html","/guide/dungeons/ur.html","/guide/foo/","/guide/foo/ray.html","/guide/raid/intro.html","/guide/raid/nol.html","/guide/raid/notg.html","/guide/raid/tcc.html","/guide/raid/tna.html","/newbie/lvl1-10/discovery.html","/newbie/lvl1-10/thingstodo.html","/newbie/lvl101-110/discovery.html","/newbie/lvl101-110/thingstodo.html","/newbie/lvl11-20/discovery.html","/newbie/lvl11-20/thingstodo.html","/newbie/lvl21-30/discovery.html","/newbie/lvl21-30/thingstodo.html","/newbie/lvl31-40/discovery.html","/newbie/lvl31-40/thingstodo.html","/newbie/lvl41-50/discovery.html","/newbie/lvl41-50/thingstodo.html","/newbie/lvl51-60/discovery.html","/newbie/lvl51-60/thingstodo.html","/newbie/lvl61-70/discovery.html","/newbie/lvl61-70/thingstodo.html","/newbie/lvl71-80/discovery.html","/newbie/lvl71-80/thingstodo.html","/newbie/lvl81-90/discovery.html","/newbie/lvl81-90/thingstodo.html","/newbie/lvl91-100/discovery.html","/newbie/lvl91-100/thingstodo.html","/quests/lvl1-10/level%201%20-%20King's%20Recruit.html","/quests/lvl1-10/level%201%20-%20ZEnzan's%20Brother.html","/quests/lvl1-10/level%2010%20-%20Maltic's%20Well.html","/quests/lvl1-10/level%202%20-%20Poisoning%20the%20Pest.html","/quests/lvl1-10/level%203%20-%20Cook%20Assistant.html","/quests/lvl1-10/level%204%20-%20Infested%20Plants.html","/quests/lvl1-10/level%205%20-%20Sewers%20of%20Ragni.html","/quests/lvl1-10/level%206%20-%20Mushroom%20Man.html","/quests/lvl1-10/level%206%20-%20Tunnel%20Trouble.html","/quests/lvl1-10/level%208%20%20-%20Underwater.html","/quests/lvl1-10/level%208%20-%20Taking%20the%20tower.html","/quests/lvl101-110/level%20101%20-%20A%20Journey%20Further.html","/quests/lvl101-110/level%20102%20-%20Point%20of%20No%20Return.html","/quests/lvl101-110/level%20103%20-%20A%20hunter%E2%80%99s%20calling.html","/quests/lvl11-20/level%2011%20-%20Elemental%20Exercise.html","/quests/lvl11-20/level%2012%20-%20Potion%20Making.html","/quests/lvl11-20/level%2013%20-%20Stable%20Story.html","/quests/lvl11-20/level%2014%20-%20Arachnids'%20Ascent.html","/quests/lvl11-20/level%2016%20-%20Supply%20and%20Delivery.html","/quests/lvl11-20/level%2018%20-%20Lava%20Spring.html","/quests/lvl11-20/level%2020%20-%20Grave%20Digger.html","/quests/lvl11-20/level%2020%20-%20Pit%20of%20the%20Dead.html","/quests/lvl21-30/level%2021%20-%20The%20Dark%20Descent.html","/quests/lvl21-30/level%2022%20-%20Dwelling%20Walls.html","/quests/lvl21-30/level%2023%20-%20Cluck%20Cluck.html","/quests/lvl21-30/level%2024%20-%20Lost%20Tower.html","/quests/lvl21-30/level%2025%20-%20Creeper%20Infiltration.html","/quests/lvl21-30/level%2025%20-%20Recover%20The%20Past.html","/quests/lvl21-30/level%2025%20-%20Tempo%20Town%20Trouble.html","/quests/lvl21-30/level%2027%20-%20D%C3%A9j%C3%A0%20vu.html","/quests/lvl21-30/level%2028%20-%20Misadventure%20on%20the%20Sea.html","/quests/lvl21-30/level%2028%20-%20The%20Corrupted%20Village.html","/quests/lvl21-30/level%2030%20-%20The%20Mercenary.html","/quests/lvl31-40/level%2031%20-%20Green%20Gloop.html","/quests/lvl31-40/level%2032%20-%20A%20Sandy%20Scandal.html","/quests/lvl31-40/level%2033%20-%20Kingdom%20of%20Sand.html","/quests/lvl31-40/level%2033%20-%20Meaningful%20Holiday.html","/quests/lvl31-40/level%2035%20-%20Tribal%20Aggression.html","/quests/lvl31-40/level%2035%20-%20WynnExcavation%20Site%20A.html","/quests/lvl31-40/level%2036%20-%20Wrath%20of%20the%20Mummy.html","/quests/lvl31-40/level%2038%20-%20Canyon%20Condor.html","/quests/lvl31-40/level%2039%20-%20Clearing%20the%20Camps.html","/quests/lvl31-40/level%2039%20-%20Pirate_s%20Trove.html","/quests/lvl31-40/level%2040%20-%20Ice%20Nations.html","/quests/lvl31-40/level%2040%20-%20Tower%20of%20Ascension.html","/quests/lvl41-50/level%2041%20-%20Heart%20of%20Llevigar.html","/quests/lvl41-50/level%2042%20-%20Star%20Thief.html","/quests/lvl41-50/level%2043%20-%20Fate%20of%20the%20Fallen.html","/quests/lvl41-50/level%2043%20-%20Underice.html","/quests/lvl41-50/level%2044%20-%20Blazing%20Retribution.html","/quests/lvl41-50/level%2045%20-%20Bob's%20Lost%20Soul.html","/quests/lvl41-50/level%2046%20-%20WynnExcavation%20Site%20B.html","/quests/lvl41-50/level%2048%20-%20Frost%20Bite.html","/quests/lvl41-50/level%2049%20-%20An%20Iron%20Heart%20Part%20I.html","/quests/lvl41-50/level%2049%20-%20Rise%20of%20the%20Quartron.html","/quests/lvl41-50/level%2049%20-%20The%20House%20of%20Twain.html","/quests/lvl41-50/level%2050%20-%20A%20Grave%20Mistake.html","/quests/lvl51-60/level%2051%20-%20The%20Maiden%20Tower.html","/quests/lvl51-60/level%2052%20-%20Corrupted%20Betrayal.html","/quests/lvl51-60/level%2052%20-%20Crop%20Failure.html","/quests/lvl51-60/level%2052%20-%20Jungle%20Fever.html","/quests/lvl51-60/level%2053%20-%20Death%20Whistle.html","/quests/lvl51-60/level%2053%20-%20Master%20Piece.html","/quests/lvl51-60/level%2054%20-%20Realm%20of%20Light%20I%20-%20The%20Worm%20Holes.html","/quests/lvl51-60/level%2054%20-%20The%20Shadow%20of%20the%20Beast.html","/quests/lvl51-60/level%2055%20-%20WynnExcavation%20Site%20C%20.html","/quests/lvl51-60/level%2055%20-%20Zhight%20Island.html","/quests/lvl51-60/level%2057%20-%20The%20Passage.html","/quests/lvl51-60/level%2058%20-%20An%20Iron%20Heart%20Part%20II.html","/quests/lvl51-60/level%2059%20-%20The%20Order%20of%20the%20Grook.html","/quests/lvl51-60/level%2060%20-%20Beneath%20the%20Depths.html","/quests/lvl61-70/level%2061%20-%20Reclaiming%20the%20House.html","/quests/lvl61-70/level%2061%20-%20Redbeard's%20Booty.html","/quests/lvl61-70/level%2062%20-%20Lost%20in%20the%20Jungle.html","/quests/lvl61-70/level%2062%20-%20Realm%20of%20Light%20II%20-%20Taproot.html","/quests/lvl61-70/level%2063%20-%20Out%20of%20My%20Mind.html","/quests/lvl61-70/level%2064%20-%20All%20Roads%20to%20Peace.html","/quests/lvl61-70/level%2064%20-%20Realm%20of%20Light%20III%20-%20A%20Headless%20History.html","/quests/lvl61-70/level%2065%20-%20Lost%20Royalty.html","/quests/lvl61-70/level%2066%20-%20Lost%20Soles.html","/quests/lvl61-70/level%2067%20-%20From%20the%20Mountains.html","/quests/lvl61-70/level%2067%20-%20Memory%20Paranoia.html","/quests/lvl61-70/level%2068%20-%20Temple%20of%20the%20Legends.html","/quests/lvl61-70/level%2069%20-%20Grand%20Youth.html","/quests/lvl61-70/level%2069%20-%20Lazarus%20Pit.html","/quests/lvl61-70/level%2070%20-%20Haven%20of%20Antiquity.html","/quests/lvl61-70/level%2070%20-%20Shattered%20Minds.html","/quests/lvl61-70/level%2070%20-%20WynnExcavation%20Site%20D.html","/quests/lvl71-80/level%2071%20-%20Realm%20of%20Light%20IV%20-%20Finding%20the%20Light.html","/quests/lvl71-80/level%2072%20-%20Forbidden%20Prison.html","/quests/lvl71-80/level%2072%20-%20Lexdale%20Witch%20Trials.html","/quests/lvl71-80/level%2073%20-%20Hollow%20Serenity.html","/quests/lvl71-80/level%2073%20-%20Murder%20Mystery.html","/quests/lvl71-80/level%2073%20-%20Troubled%20Tribesmen.html","/quests/lvl71-80/level%2074%20-%20Aldorei's%20Secret%20Part%20I.html","/quests/lvl71-80/level%2074%20-%20Aquiring%20of%20Credentials.html","/quests/lvl71-80/level%2074%20-%20Reincarnation.html","/quests/lvl71-80/level%2075%20-%20Flight%20In%20distress.html","/quests/lvl71-80/level%2075%20-%20The%20Ultimate%20Weapon.html","/quests/lvl71-80/level%2076%20-%20The%20Bigger%20Picture.html","/quests/lvl71-80/level%2077%20-%20Purple%20and%20Blue.html","/quests/lvl71-80/level%2077%20-%20The%20Hunger%20of%20Gerts%20Part%20I.html","/quests/lvl71-80/level%2078%20-%20Aldorei's%20Secret%20Part%20II.html","/quests/lvl71-80/level%2078%20-%20The%20Hunger%20of%20Gerts%20Part%20II.html","/quests/lvl71-80/level%2079%20-%20Fallen%20Delivery.html","/quests/lvl71-80/level%2079%20-%20Realm%20of%20Light%20V%20-%20The%20Realm%20of%20Light.html","/quests/lvl71-80/level%2080%20-%20General's%20Order.html","/quests/lvl71-80/level%2080%20-%20The%20Qira%20Hive.html","/quests/lvl71-80/level%2080%20-%20Z%EF%BC%9F%EF%BC%9F%EF%BC%9F.html","/quests/lvl81-90/level%2081%20-%20From%20The%20Bottom.html","/quests/lvl81-90/level%2081%20-%20The%20Thanos%20Depository.html","/quests/lvl81-90/level%2083%20-%20A%20Maradurs%20Due.html","/quests/lvl81-90/level%2083%20-%20The%20Envoy%20Part%20I.html","/quests/lvl81-90/level%2084%20-%20The%20Canyon%20Guides.html","/quests/lvl81-90/level%2085%20-%20The%20Lost.html","/quests/lvl81-90/level%2086%20-%20Cowfusion.html","/quests/lvl81-90/level%2086%20-%20Desperate%20Metal.html","/quests/lvl81-90/level%2086%20-%20The%20Canary%20Calls.html","/quests/lvl81-90/level%2087%20-%20Beyond%20the%20Grave.html","/quests/lvl81-90/level%2087%20-%20Mixed%20Feelings.html","/quests/lvl81-90/level%2088%20-%20The%20Hidden%20City.html","/quests/lvl81-90/level%2089%20-%20Enter%20the%20Dojo.html","/quests/lvl81-90/level%2089%20-%20The%20Envoy%20Part%20II.html","/quests/lvl81-90/level%2090%20-%20Fantastic%20Voyage.html","/quests/lvl91-100/level%20100%20-%20A%20Journey%20Beyond.html","/quests/lvl91-100/level%20100%20-%20The%20Olmic%20Rune.html","/quests/lvl91-100/level%2091%20-%20Dwarves%20and%20Doguns%20part%20I.html","/quests/lvl91-100/level%2091%20-%20The%20Feathers%20Fly%20Part%20I.html","/quests/lvl91-100/level%2092%20-%20Dwarves%20and%20Doguns%20Part%20II.html","/quests/lvl91-100/level%2093%20-%20Dwarves%20and%20Doguns%20Part%20III.html","/quests/lvl91-100/level%2093%20-%20The%20Feathers%20Fly%20Part%20II.html","/quests/lvl91-100/level%2094%20-%20Dwarves%20and%20Doguns%20Part%20IV.html","/quests/lvl91-100/level%2095%20-%20One%20Thousand%20Meters%20Under.html","/quests/lvl91-100/level%2096%20-%20Recipe%20for%20Disaster.html","/quests/lvl91-100/level%2097%20-%20The%20Breaking%20Point.html","/quests/lvl91-100/level%2098%20-%20Royal%20Trials.html","/quests/lvl91-100/level%2099%20-%20The%20Hero%20of%20Gavel.html","/quests/special/1.Spooky%20Detlas%20Mystery.html","/quests/special/3.2024heros.html","/quests/valued/valued_quest.html","/404.html","/guide/advancesystem/","/guide/basesystem/","/guide/commonfunction/","/guide/dungeons/","/guide/raid/","/newbie/lvl1-10/","/newbie/lvl101-110/","/newbie/lvl11-20/","/newbie/lvl21-30/","/newbie/lvl31-40/","/newbie/lvl41-50/","/newbie/lvl51-60/","/newbie/lvl61-70/","/newbie/lvl71-80/","/newbie/lvl81-90/","/newbie/lvl91-100/","/quests/lvl1-10/","/quests/lvl101-110/","/quests/lvl11-20/","/quests/lvl21-30/","/quests/lvl31-40/","/quests/lvl41-50/","/quests/lvl51-60/","/quests/lvl61-70/","/quests/lvl71-80/","/quests/lvl81-90/","/quests/lvl91-100/","/quests/special/","/quests/valued/"],we="SEARCH_PRO_QUERY_HISTORY",c=O(we,[]),Te=()=>{const{queryHistoryCount:s}=x,u=s>0;return{enabled:u,queryHistory:c,addQueryHistory:v=>{u&&(c.value.length<s?c.value=Array.from(new Set([v,...c.value])):c.value=Array.from(new Set([v,...c.value.slice(0,s-1)])))},removeQueryHistory:v=>{c.value=[...c.value.slice(0,v),...c.value.slice(v+1)]}}},M=s=>be[s.id]+("anchor"in s?`#${s.anchor}`:""),Re="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:F}=x,q=O(Re,[]),Ie=()=>{const s=F>0;return{enabled:s,resultHistory:q,addResultHistory:u=>{if(s){const v={link:M(u),display:u.display};"header"in u&&(v.header=u.header),q.value.length<F?q.value=[v,...q.value]:q.value=[v,...q.value.slice(0,F-1)]}},removeResultHistory:u=>{q.value=[...q.value.slice(0,u),...q.value.slice(u+1)]}}},He=s=>{const u=he(),v=U(),C=oe(),i=L(!1),y=me([]);return de(()=>{const{search:w,terminate:g}=ce(),T=()=>{y.value=[],i.value=!1},p=fe(m=>{i.value=!0,m?w(m,v.value,u.value).then(d=>{var R,f;return((f=(R=u.value).searchFilter)==null?void 0:f.call(R,d,m,v.value,C.value))??d}).then(d=>{y.value=d,i.value=!1}).catch(d=>{console.error(d),T()}):T()},x.searchDelay);V([s,v],()=>p(s.value),{immediate:!0}),qe(()=>{g()})}),{searching:i,results:y}};var Pe=X({name:"SearchResult",props:{query:{type:String,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(s,{emit:u}){const v=ee(),C=U(),i=le(te),{enabled:y,addQueryHistory:w,queryHistory:g,removeQueryHistory:T}=Te(),{enabled:p,resultHistory:m,addResultHistory:d,removeResultHistory:R}=Ie(),f=y||p,P=se(s,"query"),{results:b,searching:_}=He(P),a=ue({isQuery:!0,index:0}),h=L(0),o=L(0),E=A(()=>f&&(g.value.length>0||m.value.length>0)),S=A(()=>b.value.length>0),D=A(()=>b.value[h.value]||null),$=()=>{const{isQuery:e,index:l}=a;l===0?(a.isQuery=!e,a.index=e?m.value.length-1:g.value.length-1):a.index=l-1},j=()=>{const{isQuery:e,index:l}=a;l===(e?g.value.length-1:m.value.length-1)?(a.isQuery=!e,a.index=0):a.index=l+1},z=()=>{h.value=h.value>0?h.value-1:b.value.length-1,o.value=D.value.contents.length-1},J=()=>{h.value=h.value<b.value.length-1?h.value+1:0,o.value=0},K=()=>{o.value<D.value.contents.length-1?o.value+=1:J()},N=()=>{o.value>0?o.value-=1:z()},k=e=>e.map(l=>ge(l)?l:t(l[0],l[1])),Y=e=>{if(e.type==="customField"){const l=ye[e.index]||"$content",[r,H=""]=pe(l)?l[C.value].split("$content"):l.split("$content");return e.display.map(n=>t("div",k([r,...n,H])))}return e.display.map(l=>t("div",k(l)))},I=()=>{h.value=0,o.value=0,u("updateQuery",""),u("close")};return ve("keydown",e=>{if(s.isFocusing){if(S.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")K();else if(e.key==="Enter"){const l=D.value.contents[o.value];w(s.query),d(l),v.push(M(l)),I()}}else if(p){if(e.key==="ArrowUp")$();else if(e.key==="ArrowDown")j();else if(e.key==="Enter"){const{index:l}=a;a.isQuery?(u("updateQuery",g.value[l]),e.preventDefault()):(v.push(m.value[l].link),I())}}}}),V([h,o],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["search-pro-result-wrapper",{empty:P.value?!S.value:!E.value}],id:"search-pro-results"},P.value===""?f?E.value?[y?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},i.value.queryHistory),g.value.map((e,l)=>t("div",{class:["search-pro-result-item",{active:a.isQuery&&a.index===l}],onClick:()=>{u("updateQuery",e)}},[t(B,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},e),t("button",{class:"search-pro-remove-icon",innerHTML:G,onClick:r=>{r.preventDefault(),r.stopPropagation(),T(l)}})]))])):null,p?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},i.value.resultHistory),m.value.map((e,l)=>t(W,{to:e.link,class:["search-pro-result-item",{active:!a.isQuery&&a.index===l}],onClick:()=>{I()}},()=>[t(B,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(r=>k(r)).flat())]),t("button",{class:"search-pro-remove-icon",innerHTML:G,onClick:r=>{r.preventDefault(),r.stopPropagation(),R(l)}})]))])):null]:i.value.emptyHistory:i.value.emptyResult:_.value?t(ae,{hint:i.value.searching}):S.value?t("ul",{class:"search-pro-result-list"},b.value.map(({title:e,contents:l},r)=>{const H=h.value===r;return t("li",{class:["search-pro-result-list-item",{active:H}]},[t("div",{class:"search-pro-result-title"},e||i.value.defaultTitle),l.map((n,Z)=>{const Q=H&&o.value===Z;return t(W,{to:M(n),class:["search-pro-result-item",{active:Q,"aria-selected":Q}],onClick:()=>{w(s.query),d(n),I()}},()=>[n.type==="text"?null:t(n.type==="title"?ie:n.type==="heading"?re:ne,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[n.type==="text"&&n.header?t("div",{class:"content-header"},n.header):null,t("div",Y(n))])])})])})):i.value.emptyResult)}});export{Pe as default};
