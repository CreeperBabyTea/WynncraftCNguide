import{u as O,i as Z,j as ee,k as I,l as le,m as te,t as se,q as ue,s as D,v as F,x as ve,y as U,z as t,A as T,B as $,R as B,C as ae,D as ie,E as re,F as he,G as ne,H as oe,I as me,J as de,O as ce,K as qe,L as ge,P as ye,M as pe,N as fe,Q as z}from"./app-BO2ShByA.js";const be=["/","/guide/88skip.html","/guide/","/guide/beforegame.html","/guide/class.html","/guide/community.html","/guide/developmentroute.html","/guide/dungeon.html","/guide/earnle.html","/guide/festival.html","/guide/grindspot.html","/guide/history.html","/guide/mod.html","/guide/npcs.html","/guide/profession.html","/guide/qa.html","/guide/skilltreestd.html","/guide/slang.html","/guide/support.html","/guide/vip.html","/newbie/","/newbie/beforegame.html","/quests/","/guide/advancesystem/bossaltar.html","/guide/advancesystem/build.html","/guide/advancesystem/guild.html","/guide/advancesystem/guildwar.html","/guide/advancesystem/li.html","/guide/advancesystem/mythic.html","/guide/advancesystem/tome.html","/guide/bar/","/guide/bar/baz.html","/guide/basesystem/cave.html","/guide/basesystem/command.html","/guide/basesystem/identification.html","/guide/basesystem/identify.html","/guide/basesystem/itemlevel.html","/guide/basesystem/powder.html","/guide/basesystem/questbook.html","/guide/basesystem/secretdiscovery.html","/guide/basesystem/soulpoint.html","/guide/commonfunction/emeraldpouch.html","/guide/commonfunction/horse.html","/guide/commonfunction/objective.html","/guide/commonfunction/pets.html","/guide/commonfunction/trademarket.html","/guide/dungeons/ds.html","/guide/dungeons/ip.html","/guide/dungeons/sst.html","/guide/dungeons/ts.html","/guide/dungeons/uc.html","/guide/dungeons/ur.html","/guide/foo/","/guide/foo/ray.html","/guide/raid/intro.html","/guide/raid/nol.html","/guide/raid/notg.html","/guide/raid/tcc.html","/guide/raid/tna.html","/newbie/lvl1-10/discovery.html","/newbie/lvl1-10/thingstodo.html","/newbie/lvl101-110/discovery.html","/newbie/lvl101-110/thingstodo.html","/newbie/lvl11-20/discovery.html","/newbie/lvl11-20/thingstodo.html","/newbie/lvl21-30/discovery.html","/newbie/lvl21-30/thingstodo.html","/newbie/lvl31-40/discovery.html","/newbie/lvl31-40/thingstodo.html","/newbie/lvl41-50/discovery.html","/newbie/lvl41-50/thingstodo.html","/newbie/lvl51-60/discovery.html","/newbie/lvl51-60/thingstodo.html","/newbie/lvl61-70/discovery.html","/newbie/lvl61-70/thingstodo.html","/newbie/lvl71-80/discovery.html","/newbie/lvl71-80/thingstodo.html","/newbie/lvl81-90/discovery.html","/newbie/lvl81-90/thingstodo.html","/newbie/lvl91-100/discovery.html","/newbie/lvl91-100/thingstodo.html","/quests/lvl1-10/level%201%20-%20king's%20recruit.html","/quests/lvl1-10/level%201%20-%20zenzan's%20brother.html","/quests/lvl1-10/level%2010%20-%20maltic's%20well.html","/quests/lvl1-10/level%202%20-%20poisoning%20the%20pest.html","/quests/lvl1-10/level%203%20-%20cook%20assistant.html","/quests/lvl1-10/level%204%20-%20infested%20plants.html","/quests/lvl1-10/level%205%20-%20sewers%20of%20ragni.html","/quests/lvl1-10/level%206%20-%20mushroom%20man.html","/quests/lvl1-10/level%206%20-%20tunnel%20trouble.html","/quests/lvl1-10/level%208%20%20-%20underwater.html","/quests/lvl1-10/level%208%20-%20taking%20the%20tower.html","/quests/lvl101-110/level%20101%20-%20a%20journey%20further.html","/quests/lvl101-110/level%20102%20-%20point%20of%20no%20return.html","/quests/lvl101-110/level%20103%20-%20a%20hunter%E2%80%99s%20calling.html","/quests/lvl11-20/level%2011%20-%20elemental%20exercise.html","/quests/lvl11-20/level%2012%20-%20potion%20making.html","/quests/lvl11-20/level%2013%20-%20stable%20story.html","/quests/lvl11-20/level%2014%20-%20arachnids'%20ascent.html","/quests/lvl11-20/level%2016%20-%20supply%20and%20delivery.html","/quests/lvl11-20/level%2018%20-%20lava%20spring.html","/quests/lvl11-20/level%2020%20-%20grave%20digger.html","/quests/lvl11-20/level%2020%20-%20pit%20of%20the%20dead.html","/quests/lvl21-30/level%2021%20-%20the%20dark%20descent.html","/quests/lvl21-30/level%2022%20-%20dwelling%20walls.html","/quests/lvl21-30/level%2023%20-%20cluck%20cluck.html","/quests/lvl21-30/level%2024%20-%20lost%20tower.html","/quests/lvl21-30/level%2025%20-%20creeper%20infiltration.html","/quests/lvl21-30/level%2025%20-%20recover%20the%20past.html","/quests/lvl21-30/level%2025%20-%20tempo%20town%20trouble.html","/quests/lvl21-30/level%2027%20-%20d%C3%A9j%C3%A0%20vu.html","/quests/lvl21-30/level%2028%20-%20misadventure%20on%20the%20sea.html","/quests/lvl21-30/level%2028%20-%20the%20corrupted%20village.html","/quests/lvl21-30/level%2030%20-%20the%20mercenary.html","/quests/lvl31-40/level%2031%20-%20green%20gloop.html","/quests/lvl31-40/level%2032%20-%20a%20sandy%20scandal.html","/quests/lvl31-40/level%2033%20-%20kingdom%20of%20sand.html","/quests/lvl31-40/level%2033%20-%20meaningful%20holiday.html","/quests/lvl31-40/level%2035%20-%20tribal%20aggression.html","/quests/lvl31-40/level%2035%20-%20wynnexcavation%20site%20a.html","/quests/lvl31-40/level%2036%20-%20wrath%20of%20the%20mummy.html","/quests/lvl31-40/level%2038%20-%20canyon%20condor.html","/quests/lvl31-40/level%2039%20-%20clearing%20the%20camps.html","/quests/lvl31-40/level%2039%20-%20pirate_s%20trove.html","/quests/lvl31-40/level%2040%20-%20ice%20nations.html","/quests/lvl31-40/level%2040%20-%20tower%20of%20ascension.html","/quests/lvl41-50/level%2041%20-%20heart%20of%20llevigar.html","/quests/lvl41-50/level%2042%20-%20star%20thief.html","/quests/lvl41-50/level%2043%20-%20fate%20of%20the%20fallen.html","/quests/lvl41-50/level%2043%20-%20underice.html","/quests/lvl41-50/level%2044%20-%20blazing%20retribution.html","/quests/lvl41-50/level%2045%20-%20bob's%20lost%20soul.html","/quests/lvl41-50/level%2046%20-%20wynnexcavation%20site%20b.html","/quests/lvl41-50/level%2048%20-%20frost%20bite.html","/quests/lvl41-50/level%2049%20-%20an%20iron%20heart%20part%20i.html","/quests/lvl41-50/level%2049%20-%20rise%20of%20the%20quartron.html","/quests/lvl41-50/level%2049%20-%20the%20house%20of%20twain.html","/quests/lvl41-50/level%2050%20-%20a%20grave%20mistake.html","/quests/lvl51-60/level%2051%20-%20the%20maiden%20tower.html","/quests/lvl51-60/level%2052%20-%20corrupted%20betrayal.html","/quests/lvl51-60/level%2052%20-%20crop%20failure.html","/quests/lvl51-60/level%2052%20-%20jungle%20fever.html","/quests/lvl51-60/level%2053%20-%20death%20whistle.html","/quests/lvl51-60/level%2053%20-%20master%20piece.html","/quests/lvl51-60/level%2054%20-%20realm%20of%20light%20i%20-%20the%20worm%20holes.html","/quests/lvl51-60/level%2054%20-%20the%20shadow%20of%20the%20beast.html","/quests/lvl51-60/level%2055%20-%20wynnexcavation%20site%20c%20.html","/quests/lvl51-60/level%2055%20-%20zhight%20island.html","/quests/lvl51-60/level%2057%20-%20the%20passage.html","/quests/lvl51-60/level%2058%20-%20an%20iron%20heart%20part%20ii.html","/quests/lvl51-60/level%2059%20-%20the%20order%20of%20the%20grook.html","/quests/lvl51-60/level%2060%20-%20beneath%20the%20depths.html","/quests/lvl61-70/level%2061%20-%20reclaiming%20the%20house.html","/quests/lvl61-70/level%2061%20-%20redbeard's%20booty.html","/quests/lvl61-70/level%2062%20-%20lost%20in%20the%20jungle.html","/quests/lvl61-70/level%2062%20-%20realm%20of%20light%20ii%20-%20taproot.html","/quests/lvl61-70/level%2063%20-%20out%20of%20my%20mind.html","/quests/lvl61-70/level%2064%20-%20all%20roads%20to%20peace.html","/quests/lvl61-70/level%2064%20-%20realm%20of%20light%20iii%20-%20a%20headless%20history.html","/quests/lvl61-70/level%2065%20-%20lost%20royalty.html","/quests/lvl61-70/level%2066%20-%20lost%20soles.html","/quests/lvl61-70/level%2067%20-%20from%20the%20mountains.html","/quests/lvl61-70/level%2067%20-%20memory%20paranoia.html","/quests/lvl61-70/level%2068%20-%20temple%20of%20the%20legends.html","/quests/lvl61-70/level%2069%20-%20grand%20youth.html","/quests/lvl61-70/level%2069%20-%20lazarus%20pit.html","/quests/lvl61-70/level%2070%20-%20haven%20of%20antiquity.html","/quests/lvl61-70/level%2070%20-%20shattered%20minds.html","/quests/lvl61-70/level%2070%20-%20wynnexcavation%20site%20d.html","/quests/lvl71-80/level%2071%20-%20realm%20of%20light%20iv%20-%20finding%20the%20light.html","/quests/lvl71-80/level%2072%20-%20forbidden%20prison.html","/quests/lvl71-80/level%2072%20-%20lexdale%20witch%20trials.html","/quests/lvl71-80/level%2073%20-%20hollow%20serenity.html","/quests/lvl71-80/level%2073%20-%20murder%20mystery.html","/quests/lvl71-80/level%2073%20-%20troubled%20tribesmen.html","/quests/lvl71-80/level%2074%20-%20aldorei's%20secret%20part%20i.html","/quests/lvl71-80/level%2074%20-%20aquiring%20of%20credentials.html","/quests/lvl71-80/level%2074%20-%20reincarnation.html","/quests/lvl71-80/level%2075%20-%20flight%20in%20distress.html","/quests/lvl71-80/level%2075%20-%20the%20ultimate%20weapon.html","/quests/lvl71-80/level%2076%20-%20the%20bigger%20picture.html","/quests/lvl71-80/level%2077%20-%20purple%20and%20blue.html","/quests/lvl71-80/level%2077%20-%20the%20hunger%20of%20gerts%20part%20i.html","/quests/lvl71-80/level%2078%20-%20aldorei's%20secret%20part%20ii.html","/quests/lvl71-80/level%2078%20-%20the%20hunger%20of%20gerts%20part%20ii.html","/quests/lvl71-80/level%2079%20-%20fallen%20delivery.html","/quests/lvl71-80/level%2079%20-%20realm%20of%20light%20v%20-%20the%20realm%20of%20light.html","/quests/lvl71-80/level%2080%20-%20general's%20order.html","/quests/lvl71-80/level%2080%20-%20the%20qira%20hive.html","/quests/lvl71-80/level%2080%20-%20z%EF%BC%9F%EF%BC%9F%EF%BC%9F.html","/quests/lvl81-90/level%2081%20-%20from%20the%20bottom.html","/quests/lvl81-90/level%2081%20-%20the%20thanos%20depository.html","/quests/lvl81-90/level%2083%20-%20a%20maradurs%20due.html","/quests/lvl81-90/level%2083%20-%20the%20envoy%20part%20i.html","/quests/lvl81-90/level%2084%20-%20the%20canyon%20guides.html","/quests/lvl81-90/level%2085%20-%20the%20lost.html","/quests/lvl81-90/level%2086%20-%20cowfusion.html","/quests/lvl81-90/level%2086%20-%20desperate%20metal.html","/quests/lvl81-90/level%2086%20-%20the%20canary%20calls.html","/quests/lvl81-90/level%2087%20-%20beyond%20the%20grave.html","/quests/lvl81-90/level%2087%20-%20mixed%20feelings.html","/quests/lvl81-90/level%2088%20-%20the%20hidden%20city.html","/quests/lvl81-90/level%2089%20-%20enter%20the%20dojo.html","/quests/lvl81-90/level%2089%20-%20the%20envoy%20part%20ii.html","/quests/lvl81-90/level%2090%20-%20fantastic%20voyage.html","/quests/lvl91-100/level%20100%20-%20a%20journey%20beyond.html","/quests/lvl91-100/level%20100%20-%20the%20olmic%20rune.html","/quests/lvl91-100/level%2091%20-%20dwarves%20and%20doguns%20part%20i.html","/quests/lvl91-100/level%2091%20-%20the%20feathers%20fly%20part%20i.html","/quests/lvl91-100/level%2092%20-%20dwarves%20and%20doguns%20part%20ii.html","/quests/lvl91-100/level%2093%20-%20dwarves%20and%20doguns%20part%20iii.html","/quests/lvl91-100/level%2093%20-%20the%20feathers%20fly%20part%20ii.html","/quests/lvl91-100/level%2094%20-%20dwarves%20and%20doguns%20part%20iv.html","/quests/lvl91-100/level%2095%20-%20one%20thousand%20meters%20under.html","/quests/lvl91-100/level%2096%20-%20recipe%20for%20disaster.html","/quests/lvl91-100/level%2097%20-%20the%20breaking%20point.html","/quests/lvl91-100/level%2098%20-%20royal%20trials.html","/quests/lvl91-100/level%2099%20-%20the%20hero%20of%20gavel.html","/quests/special/1.spooky%20detlas%20mystery.html","/quests/special/3.2024heros.html","/quests/valued/valued_quest.html","/404.html","/guide/advancesystem/","/guide/basesystem/","/guide/commonfunction/","/guide/dungeons/","/guide/raid/","/newbie/lvl1-10/","/newbie/lvl101-110/","/newbie/lvl11-20/","/newbie/lvl21-30/","/newbie/lvl31-40/","/newbie/lvl41-50/","/newbie/lvl51-60/","/newbie/lvl61-70/","/newbie/lvl71-80/","/newbie/lvl81-90/","/newbie/lvl91-100/","/quests/lvl1-10/","/quests/lvl101-110/","/quests/lvl11-20/","/quests/lvl21-30/","/quests/lvl31-40/","/quests/lvl41-50/","/quests/lvl51-60/","/quests/lvl61-70/","/quests/lvl71-80/","/quests/lvl81-90/","/quests/lvl91-100/","/quests/special/","/quests/valued/"],we="SEARCH_PRO_QUERY_HISTORY",c=O(we,[]),ke=()=>{const{queryHistoryCount:s}=z,u=s>0;return{enabled:u,queryHistory:c,addQueryHistory:v=>{u&&(c.value.length<s?c.value=Array.from(new Set([v,...c.value])):c.value=Array.from(new Set([v,...c.value.slice(0,s-1)])))},removeQueryHistory:v=>{c.value=[...c.value.slice(0,v),...c.value.slice(v+1)]}}},L=s=>be[s.id]+("anchor"in s?`#${s.anchor}`:""),He="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:j}=z,q=O(He,[]),xe=()=>{const s=j>0;return{enabled:s,resultHistory:q,addResultHistory:u=>{if(s){const v={link:L(u),display:u.display};"header"in u&&(v.header=u.header),q.value.length<j?q.value=[v,...q.value]:q.value=[v,...q.value.slice(0,j-1)]}},removeResultHistory:u=>{q.value=[...q.value.slice(0,u),...q.value.slice(u+1)]}}},Re=s=>{const u=ne(),v=I(),C=oe(),i=D(!1),y=me([]);return de(()=>{const{search:w,terminate:g}=ce(),k=()=>{y.value=[],i.value=!1},p=fe(m=>{i.value=!0,m?w(m,v.value,u.value).then(d=>{var H,f;return((f=(H=u.value).searchFilter)==null?void 0:f.call(H,d,m,v.value,C.value))??d}).then(d=>{y.value=d,i.value=!1}).catch(d=>{console.error(d),k()}):k()},z.searchDelay);U([s,v],()=>p(s.value),{immediate:!0}),qe(()=>{g()})}),{searching:i,results:y}};var Qe=Z({name:"SearchResult",props:{query:{type:String,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(s,{emit:u}){const v=ee(),C=I(),i=le(te),{enabled:y,addQueryHistory:w,queryHistory:g,removeQueryHistory:k}=ke(),{enabled:p,resultHistory:m,addResultHistory:d,removeResultHistory:H}=xe(),f=y||p,Q=se(s,"query"),{results:b,searching:M}=Re(Q),a=ue({isQuery:!0,index:0}),n=D(0),o=D(0),_=F(()=>f&&(g.value.length>0||m.value.length>0)),S=F(()=>b.value.length>0),A=F(()=>b.value[n.value]||null),Y=()=>{const{isQuery:e,index:l}=a;l===0?(a.isQuery=!e,a.index=e?m.value.length-1:g.value.length-1):a.index=l-1},G=()=>{const{isQuery:e,index:l}=a;l===(e?g.value.length-1:m.value.length-1)?(a.isQuery=!e,a.index=0):a.index=l+1},J=()=>{n.value=n.value>0?n.value-1:b.value.length-1,o.value=A.value.contents.length-1},K=()=>{n.value=n.value<b.value.length-1?n.value+1:0,o.value=0},N=()=>{o.value<A.value.contents.length-1?o.value+=1:K()},V=()=>{o.value>0?o.value-=1:J()},E=e=>e.map(l=>ge(l)?l:t(l[0],l[1])),W=e=>{if(e.type==="customField"){const l=ye[e.index]||"$content",[r,R=""]=pe(l)?l[C.value].split("$content"):l.split("$content");return e.display.map(h=>t("div",E([r,...h,R])))}return e.display.map(l=>t("div",E(l)))},x=()=>{n.value=0,o.value=0,u("updateQuery",""),u("close")};return ve("keydown",e=>{if(s.isFocusing){if(S.value){if(e.key==="ArrowUp")V();else if(e.key==="ArrowDown")N();else if(e.key==="Enter"){const l=A.value.contents[o.value];w(s.query),d(l),v.push(L(l)),x()}}else if(p){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const{index:l}=a;a.isQuery?(u("updateQuery",g.value[l]),e.preventDefault()):(v.push(m.value[l].link),x())}}}}),U([n,o],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["search-pro-result-wrapper",{empty:Q.value?!S.value:!_.value}],id:"search-pro-results"},Q.value===""?f?_.value?[y?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},i.value.queryHistory),g.value.map((e,l)=>t("div",{class:["search-pro-result-item",{active:a.isQuery&&a.index===l}],onClick:()=>{u("updateQuery",e)}},[t(T,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},e),t("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:r=>{r.preventDefault(),r.stopPropagation(),k(l)}})]))])):null,p?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},i.value.resultHistory),m.value.map((e,l)=>t(B,{to:e.link,class:["search-pro-result-item",{active:!a.isQuery&&a.index===l}],onClick:()=>{x()}},()=>[t(T,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(r=>E(r)).flat())]),t("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:r=>{r.preventDefault(),r.stopPropagation(),H(l)}})]))])):null]:i.value.emptyHistory:i.value.emptyResult:M.value?t(ae,{hint:i.value.searching}):S.value?t("ul",{class:"search-pro-result-list"},b.value.map(({title:e,contents:l},r)=>{const R=n.value===r;return t("li",{class:["search-pro-result-list-item",{active:R}]},[t("div",{class:"search-pro-result-title"},e||i.value.defaultTitle),l.map((h,X)=>{const P=R&&o.value===X;return t(B,{to:L(h),class:["search-pro-result-item",{active:P,"aria-selected":P}],onClick:()=>{w(s.query),d(h),x()}},()=>[h.type==="text"?null:t(h.type==="title"?ie:h.type==="heading"?re:he,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[h.type==="text"&&h.header?t("div",{class:"content-header"},h.header):null,t("div",W(h))])])})])})):i.value.emptyResult)}});export{Qe as default};
